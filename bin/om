#!/bin/bash -eu

#    This file is part of OneModel, a program to manage knowledge.
#    Copyright in each year of 2010-2014 inclusive, Luke A Call; all rights reserved.
#    OneModel is free software, distributed under a license that includes honesty, the Golden Rule, guidelines around binary
#    distribution, and the GNU Affero General Public License as published by the Free Software Foundation, either version 3
#    of the License, or (at your option) any later version.  See the file LICENSE for details.
#    OneModel is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details.
#    You should have received a copy of the GNU Affero General Public License along with OneModel.  If not, see <http://www.gnu.org/licenses/>

#useful to debug or observe scripts if uncommented:
#set -x

THIS_SCRIPT_DIR=$(dirname $(readlink -en $0))
cd "$THIS_SCRIPT_DIR"/..

DEBUG=""
if [[ $# -gt 0 && $1 == 'd' ]]; then
  shift
  echo $#
  if [[ $# -gt 0  && $1 == 's' ]]; then
    echo $#
    shift
    SUSPEND='y'
  else
    SUSPEND='n'
  fi
  DEBUG="-agentlib:jdwp=transport=dt_socket,server=y,suspend=$SUSPEND,address=5005"
fi

java $DEBUG -Djline.keybindings="$THIS_SCRIPT_DIR/../jlinebindings.properties" -jar target/onemodel-*.jar $*
